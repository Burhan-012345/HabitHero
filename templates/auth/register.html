{% extends "base.html" %} {% block title %}Register - HabitHero{% endblock %} {%
block extra_css %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/auth.css') }}"
/>
{% endblock %} {% block content %}
<div class="auth-container">
  <div class="auth-card">
    <div class="logo">
      <img
        src="{{ url_for('static', filename='images/logo.png') }}"
        alt="Logo"
        class="auth-logo"
      />
      <p>Build better habits with friends</p>
    </div>

    <form id="register-form">
      <div class="form-group">
        <label for="username">Username</label>
        <input
          type="text"
          id="username"
          name="username"
          class="form-control"
          required
        />
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          name="email"
          class="form-control"
          required
        />
      </div>

      <div class="form-group">
        <button
          type="button"
          id="verify-email-btn"
          class="btn btn-primary btn-block"
        >
          Verify Email
        </button>
      </div>

      <div id="otp-section" style="display: none">
        <div class="form-group">
          <label for="otp">Verification Code</label>
          <input
            type="text"
            id="otp"
            name="otp"
            class="form-control"
            maxlength="6"
            placeholder="Enter 6-digit OTP"
          />
          <small class="text-muted"
            >Check your email for the verification code</small
          >
        </div>

        <div class="form-group">
          <button
            type="button"
            id="verify-otp-btn"
            class="btn btn-secondary btn-block"
          >
            Verify OTP
          </button>
        </div>
      </div>

      <div id="password-section" style="display: none">
        <div class="form-group password-toggle">
          <label for="password">Password</label>
          <input
            type="password"
            id="password"
            name="password"
            class="form-control"
            required
          />
          <button type="button" class="toggle-icon">
            <i class="fas fa-eye"></i>
          </button>

          <div class="password-strength">
            <div class="strength-meter">
              <div id="strength-meter-fill" class="strength-meter-fill"></div>
            </div>
          </div>

          <a href="#" id="toggle-rules" class="small">
            <i class="fas fa-chevron-down"></i> Show password instructions
          </a>

          <div id="password-rules" class="password-rules" style="display: none">
            <p class="small mb-2">Password must contain:</p>
            <ul>
              <li id="rule-length">
                <i class="fas fa-times-circle"></i> At least 8 characters
              </li>
              <li id="rule-uppercase">
                <i class="fas fa-times-circle"></i> One uppercase letter
              </li>
              <li id="rule-lowercase">
                <i class="fas fa-times-circle"></i> One lowercase letter
              </li>
              <li id="rule-number">
                <i class="fas fa-times-circle"></i> One number
              </li>
              <li id="rule-special">
                <i class="fas fa-times-circle"></i> One special character
              </li>
            </ul>
          </div>
        </div>

        <div class="form-group password-toggle">
          <label for="confirm_password">Confirm Password</label>
          <input
            type="password"
            id="confirm_password"
            name="confirm_password"
            class="form-control"
            required
          />
          <button type="button" class="toggle-icon">
            <i class="fas fa-eye"></i>
          </button>
          <div
            id="confirm-password-error"
            class="text-danger small mt-1"
            style="display: none"
          ></div>
        </div>

        <div class="form-group">
          <button
            type="submit"
            id="register-btn"
            class="btn btn-primary btn-block"
            disabled
          >
            Create Account
          </button>
        </div>
      </div>
    </form>

    <div class="text-center mt-3">
      <p class="small">
        Already have an account? <a href="{{ url_for('login') }}">Login here</a>
      </p>
    </div>
    <div style="text-align: center; margin-top: 1rem">
      <a
        href="{{ url_for('intro') }}"
        style="color: #667eea; text-decoration: none"
      >
        <i class="fas fa-arrow-left"></i> Back to Home
      </a>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Registration form handling is in auth.js
  });
</script>
{% endblock %}
